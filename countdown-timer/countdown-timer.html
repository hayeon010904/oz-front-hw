<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/oz_icon.png" />

    <link href="countdown-timer copy.css" rel="stylesheet" />
    <title>ì˜¤ì¦ˆì½”ë”©ìŠ¤ì¿¨ | ì¹´ìš´íŠ¸ë‹¤ìš´ íƒ€ì´ë¨¸</title>
  </head>
  <body>
    <header>
      <h1>HAPPY BIRTHDAYğŸ‰</h1>
      <div id="select_box">
        <input type="date" id="date" />
        <button id="select">ì„¤ì •</button>
      </div>
    </header>
    <h5>ìƒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”!</h5>
    <main>
      <div id="container">
        <div id="daysDiv" class="timerDiv">
          <p id="days" class="display"></p>
          <p class="Div-p">Days</p>
        </div>
        <div id="hoursDiv" class="timerDiv">
          <p id="hours" class="display"></p>
          <p class="Div-p">Hours</p>
        </div>
        <div id="minutesDiv" class="timerDiv">
          <p id="minutes" class="display"></p>
          <p class="Div-p">Minutes</p>
        </div>
        <div id="secondsDiv" class="timerDiv">
          <p id="seconds" class="display"></p>
          <p class="Div-p">Seconds</p>
        </div>
      </div>

      <div class="footer">
        Â© 2023. <a href="https://ozcodingschool.com/" target="_blank">ozcodingschool</a>. All rights
        reserved. Developed by <a href="#">hayeom</a>.
      </div>
    </main>

    <script>
      //1. ì‹œê°„ ë„£ì„ div ì§€ì •
      //2. date()ì´ìš©í•´ì„œ ê°ê°ì˜ ì‹œê°„ ë„£ê¸°
      //3. setIntervalë¡œ 1ì´ˆë§ˆë‹¤ ë°”ë€Œê²Œ.
      //4. ìƒˆë¡œê³ ì¹¨í•´ë„ ë‚¨ì•„ìˆë„ë¡.
      //5. 00:00:00:00ë˜ë©´ ê²½ê³¼í•œ ì‹œê°„ ë„ìš°ê¸° + ìƒˆë¡œìš´ ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”!(ë‚ ì§œì„ íƒ..í•  ìˆ˜ ìˆë„ë¡)

      //1. ì‹œê°„ ë„£ì„ div + íƒ€ì´ë¨¸ ì§€ì • ì‹œê°„ ë„ìš°ëŠ” h5 + date.button  ì§€ì •
      const daysDiv = document.getElementById("days");
      const hoursDiv = document.getElementById("hours");
      const minutesDiv = document.getElementById("minutes");
      const secondsDiv = document.getElementById("seconds");
      const selectDate = document.getElementById("date");
      const select = document.getElementById("select");
      const h5 = document.querySelector("h5");

      const now = new Date(); //Sat Jan 06 2024 05:56:37
      // const birthday = new Date(2024, 0, 8); //Wed Sep 04 2024 00:00:00 GMT+0900 -> ì‚¬ìš©ìê°€ ì§ì ‘ ì„ íƒí•  ìˆ˜ ìˆë˜ë¡ ë³€ê²½

      let start;
      // selectDate.addEventListener('change',function(){
      select.addEventListener(
        "click",
        function () {
          if (selectDate.value === "") {
            alert("ìƒì¼ì„ ì„ íƒí•´ì£¼ì„¸ìš”");
            return;
          }
          clearInterval(start);
          const selectValue = selectDate.value.split("-");
          start = setInterval(function () {
            // type=dateí™œìš©í•´ì„œ ì‹œê°„ ë„£ê¸°
            const selectArr = []; //ë‹¬ë ¥ì—ì„œ ì„ íƒí•œ ê°’ ë„£ì–´ì£¼ëŠ” ë°°ì—´
            // console.log(selectDate.value) //['2024-01-18']
            // - ê¸°ì¤€ìœ¼ë¡œ ë¬¸ìì—´ ë‚˜ëˆ„ê¸° ['2024','01','18']
            // console.log(selectValue);
            selectArr.push(selectValue); // ë¬¸ìì—´ ë‚˜ëˆˆ ê²ƒ ë°°ì—´ì— ë„£ì–´ì£¼ê¸°
            // console.log(selectArr)
            //ì—°,ì›”,ì¼ ê°ê° ì§€ì •
            const selectYear = parseInt(selectValue[0]);
            console.log(selectYear); //2024
            const selectMonth = parseInt(selectValue[1]) - 1;
            console.log(selectMonth); //0
            const selectDay = parseInt(selectValue[2]);
            console.log(selectDay); //19

            //date ëˆ„ë¥´ë©´ ìƒì¼ì§€ì •, + h5ì— ìƒì¼ ë‚ ì§œ ë„ìš°ê¸°
            const birthday = new Date(selectYear, selectMonth, selectDay);
            h5.textContent = `ë‹¹ì‹ ì˜ ìƒì¼ì€ ${birthday.getFullYear()}ë…„ ${
              birthday.getMonth() + 1
            }ì›” ${birthday.getDate()}ì¼ ì…ë‹ˆë‹¤`;

            //ìƒì¼ì‹œê°„ì—ì„œ í˜„ì¬ì‹œê°„ ë¹¼ê¸°
            const currentTime = new Date().getTime(); //1704488275434
            const birthdayTime = birthday.getTime(); //1725375600000
            const timeDifference = birthdayTime - currentTime; //20887269633

            //ë°€ë¦¬ì´ˆë¡œ ë°˜í™˜ëœ ê²ƒ ê°ê° ë°”ê¾¸ê¸°
            const days = Math.floor(timeDifference / (1000 * 3600 * 24));
            const hours = Math.floor((timeDifference / (1000 * 3600)) % 24);
            const minutes = Math.floor((timeDifference / (1000 * 60)) % 60);
            const seconds = Math.floor((timeDifference / 1000) % 60);

            //ë°”ê¾¼ê±° ë°•ìŠ¤ì— ë„£ì–´ì£¼ê¸°
            daysDiv.textContent = days;
            hoursDiv.textContent = hours;
            minutesDiv.textContent = minutes;
            secondsDiv.textContent = seconds;

            //4. 00:00:00:00ë˜ë©´ ê²½ê³¼í•œ ì‹œê°„ ë„ìš°ê¸° + ìƒ‰ ë³€ê²½// ìƒˆë¡œìš´ ë‚ ì§œë¥¼ ì„ íƒí•˜ì„¸ìš”!
            if (timeDifference < 0) {
              daysDiv.classList.add("timeover");
              hoursDiv.classList.add("timeover");
              minutesDiv.classList.add("timeover");
              secondsDiv.classList.add("timeover");

              const timeDifference = currentTime - birthdayTime;
              const days = Math.floor(timeDifference / (1000 * 3600 * 24));
              const hours = Math.floor((timeDifference / (1000 * 3600)) % 24);
              const minutes = Math.floor((timeDifference / (1000 * 60)) % 60);
              const seconds = Math.floor((timeDifference / 1000) % 60);

              daysDiv.textContent = days;
              hoursDiv.textContent = hours;
              minutesDiv.textContent = minutes;
              secondsDiv.textContent = seconds;

              h5.textContent = `ì´ë¯¸ ì§€ë‚œ ìƒì¼ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ìƒì¼ì„ ë“±ë¡í•˜ì„¸ìš”!`;
            } else {
              daysDiv.classList.remove("timeover");
              hoursDiv.classList.remove("timeover");
              minutesDiv.classList.remove("timeover");
              secondsDiv.classList.remove("timeover");
            }
          });
        },
        1000,
      );

      //3. setIntervalë¡œ 1ì´ˆë§ˆë‹¤ ë°”ë€Œê²Œ

      // ì§€ì •ëœ ì‹œê°„ë¶€í„° íƒ€ì´ë¨¸ ì‹œì‘í•˜ê²Œ
      //settimeout -> ì´ˆ.
      //ifë¬¸ ì‚¬ìš©í•´ì„œ! -> ê·¸ëŸ¼ ifë¬¸ì´ ì•ˆì— ì‡ëŠ” ë³€ìˆ˜ë¥¼ ì¨ì•¼í–ëŠ”ë””;;;-> íƒ€ì´ë¨¸ ë§Œë“œëŠ” í•¨ìˆ˜ë¥¼ ì„ ì–¸? Gooootddd
    </script>
  </body>
</html>
